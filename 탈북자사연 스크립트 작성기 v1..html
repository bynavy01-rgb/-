<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>북한 탈북자 사연 스크립트 생성기 v3 - 다국어 번역 포함</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* 탭 메뉴 */
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-button {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button.active {
            background: white;
            color: #1e3c72;
            border-bottom: 3px solid #1e3c72;
        }

        .tab-content {
            display: none;
            padding: 40px;
        }

        .tab-content.active {
            display: block;
        }

        /* 카드 스타일 */
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 24px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        /* 키워드 체크박스 */
        .keyword-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .keyword-item {
            display: flex;
            align-items: start;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .keyword-item:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .keyword-item input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 3px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .keyword-item input[type="checkbox"]:checked {
            accent-color: #667eea;
        }

        .keyword-item.checked {
            background: #e8f0ff;
            border-color: #667eea;
            font-weight: 600;
        }

        .keyword-content {
            flex: 1;
        }

        .keyword-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .keyword-description {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .hot-badge {
            background: #ff4757;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }

        /* 번역 결과 */
        .translation-results {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }

        .translation-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
        }

        .translation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .translation-lang {
            font-size: 18px;
            font-weight: 700;
            color: #1e3c72;
        }

        .translation-text {
            background: white;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.8;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            font-size: 14px;
        }

        /* 폼 스타일 */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 300px;
            font-family: inherit;
            resize: vertical;
        }

        /* 버튼 */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* 저장된 스크립트 리스트 */
        .script-list {
            display: grid;
            gap: 20px;
        }

        .script-item {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .script-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .script-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .script-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e3c72;
            flex: 1;
        }

        .script-date {
            color: #666;
            font-size: 14px;
        }

        .script-summary {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }

        .script-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .meta-tag {
            background: #e8f0ff;
            color: #1e3c72;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: 600;
        }

        .script-actions {
            display: flex;
            gap: 10px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .info-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-box strong {
            display: block;
            margin-bottom: 8px;
            color: #856404;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            color: #155724;
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .keyword-grid {
                grid-template-columns: 1fr;
            }
            
            .script-header {
                flex-direction: column;
            }
            
            .script-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🇰🇵 북한 탈북자 사연 스크립트 생성기 v3</h1>
            <p>키워드 선택 → 인물 설정 → 스크립트 생성 → 다국어 번역 → 완성!</p>
        </div>

        <!-- 탭 메뉴 -->
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('generator')">📝 스크립트 생성</button>
            <button class="tab-button" onclick="showTab('translation')">🌍 다국어 번역</button>
            <button class="tab-button" onclick="showTab('saved')">💾 저장된 스크립트 (<span id="savedCount">0</span>)</button>
        </div>

        <!-- 스크립트 생성 탭 -->
        <div id="generator" class="tab-content active">
            <div class="card">
                <h2>📅 키워드 수집 일자</h2>
                <div class="form-group">
                    <input type="date" id="keywordDate" value="">
                    <button class="btn btn-secondary btn-small" onclick="refreshKeywords()" style="margin-top: 10px;">🔄 최신 키워드 새로고침</button>
                </div>
            </div>

            <div class="card">
                <h2>🔥 북한 핫 키워드 선택 (최대 5개 권장)</h2>
                <p style="color: #666; margin-bottom: 15px;">선택한 키워드: <strong id="selectedKeywordCount">0</strong>개</p>
                
                <h3 style="margin-top: 20px; color: #1e3c72;">🔵 인물 관련</h3>
                <div class="keyword-grid">
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="김주애 후계자 AI 분석 600번">
                        <div class="keyword-content">
                            <div class="keyword-title">
                                김주애 후계자 공식 석상 등장 
                                <span class="hot-badge">HOT</span>
                            </div>
                            <div class="keyword-description">
                                AI 분석 결과 3년간 600번 방송 등장, 김정은만큼 자주 등장하며 후계자 암시 연출 급증
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="김주애 외모 변화">
                        <div class="keyword-content">
                            <div class="keyword-title">
                                김주애 외모 변화 다이어트 
                                <span class="hot-badge">HOT</span>
                            </div>
                            <div class="keyword-description">
                                최근 공개 석상에서 볼살 빠진 성숙한 모습, 한국 영양제 텐텐 북한 열풍과 연관
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="김정은 건강 이상설">
                        <div class="keyword-content">
                            <div class="keyword-title">김정은 건강 이상설</div>
                            <div class="keyword-description">
                                공식 석상 불참 증가, 체중 변화 관찰, 건강 악화 소문 지속
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="리설주 실종">
                        <div class="keyword-content">
                            <div class="keyword-title">리설주 실종 의혹</div>
                            <div class="keyword-description">
                                김주애 등장 시 리설주 부재, 최근 공개 활동 급감으로 실종 의혹 제기
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="조용원 실종">
                        <div class="keyword-content">
                            <div class="keyword-title">조용원 당 조직비서 실종</div>
                            <div class="keyword-description">
                                김정은 최측근 조용원 모습 감춤, 권력 숙청 가능성 제기
                            </div>
                        </div>
                    </label>
                </div>

                <h3 style="margin-top: 30px; color: #1e3c72;">⚡ 사건 관련</h3>
                <div class="keyword-grid">
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 러시아 3차 파병">
                        <div class="keyword-content">
                            <div class="keyword-title">
                                북한 러시아 3차 파병 3만명 
                                <span class="hot-badge">HOT</span>
                            </div>
                            <div class="keyword-description">
                                쿠르스크 전투 참전, 북한군 포로 한국행 희망, 공동 교전국 지위 논란
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 탈북자 공개 처형">
                        <div class="keyword-content">
                            <div class="keyword-title">
                                북한 탈북자 공개 처형 (2025년 2월) 
                                <span class="hot-badge">HOT</span>
                            </div>
                            <div class="keyword-description">
                                남한행 시도 청년 3명 총살형, 시신 불태우는 만행으로 탈북 경고 강화
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="탈북민 2030 세대">
                        <div class="keyword-content">
                            <div class="keyword-title">탈북민 입국 2030 세대 절반</div>
                            <div class="keyword-description">
                                2025년 1분기 38명 중 절반이 젊은층, 직행 탈북 거의 없고 중국 5년 이상 체류 후 입국
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 달러 환율 폭등">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 달러 환율 4배 급등</div>
                            <div class="keyword-description">
                                2024년 1월 8천원 → 2025년 8월 4만1천원, 경제 붕괴 신호로 해석
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 화폐개혁">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 화폐개혁 소문</div>
                            <div class="keyword-description">
                                2009년 화폐개혁 실패 트라우마 속 새로운 화폐개혁 소문 확산
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 한류 단속">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 한류 단속 강화</div>
                            <div class="keyword-description">
                                한국 드라마·영화 시청 적발 시 강제노동 15년, USB 거래 사형 등 극단적 처벌
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 의료 붕괴">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 의료 붕괴</div>
                            <div class="keyword-description">
                                약품 부족, 수술실 전기 끊김, 뇌물 없이는 치료 불가능한 의료 시스템 붕괴
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 전력난">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 전력난 악화</div>
                            <div class="keyword-description">
                                평양도 하루 2시간만 전기 공급, 지방은 주 1-2회만 송전
                            </div>
                        </div>
                    </label>
                </div>

                <h3 style="margin-top: 30px; color: #1e3c72;">🏘️ 생활 관련</h3>
                <div class="keyword-grid">
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 장마당 쌀값">
                        <div class="keyword-content">
                            <div class="keyword-title">
                                북한 장마당 쌀값 폭등 
                                <span class="hot-badge">HOT</span>
                            </div>
                            <div class="keyword-description">
                                2024년 1월 8천원 → 2025년 8월 2만1천원, 1년 만에 2배 이상 급등으로 식량난 심화
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 식용유 품귀">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 식용유 품귀 현상</div>
                            <div class="keyword-description">
                                중국산 식용유 수입 중단으로 장마당에서 식용유 구하기 불가능, 가격 10배 폭등
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 휘발유 가격">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 휘발유 가격 급등</div>
                            <div class="keyword-description">
                                평양 휘발유 가격 2만9천원선 돌파, 일반 주민은 자동차 운행 불가능한 수준
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="한국 영양제 열풍">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 한국 영양제 텐텐 열풍</div>
                            <div class="keyword-description">
                                김주애 키 성장 보고 자극, 한국 가격 4배로 장마당 판매, 상류층 사이 필수품화
                            </div>
                        </div>
                    </label>
                </div>

                <h3 style="margin-top: 30px; color: #1e3c72;">🎯 정치/군사 관련</h3>
                <div class="keyword-grid">
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북러 포괄적 전략 동반자">
                        <div class="keyword-content">
                            <div class="keyword-title">북러 포괄적 전략 동반자 조약</div>
                            <div class="keyword-description">
                                2024년 6월 체결, 상호 군사 지원 조약으로 북한 러시아 파병의 법적 근거 제공
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 핵 개발">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 핵 개발 지속</div>
                            <div class="keyword-description">
                                소형화·경량화 성공, ICBM 고체연료 전환, 실전 배치 단계 진입
                            </div>
                        </div>
                    </label>
                    <label class="keyword-item">
                        <input type="checkbox" name="keyword" value="북한 5개년 계획">
                        <div class="keyword-content">
                            <div class="keyword-title">북한 5개년 계획 마지막 해</div>
                            <div class="keyword-description">
                                2021-2025 경제발전 5개년 계획 최종년, 목표 대부분 미달성으로 체제 위기감 고조
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <div class="card">
                <h2>✍️ 직접 키워드 입력 (커스텀)</h2>
                <div id="customKeywords">
                    <div class="form-group">
                        <input type="text" placeholder="예: 김정은 최근 동향, 북한 식량난 등">
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="추가 키워드 입력">
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="추가 키워드 입력">
                    </div>
                </div>
                <button class="btn btn-secondary btn-small" onclick="addCustomKeyword()">+ 키워드 추가</button>
            </div>

            <div class="card">
                <h2>👤 탈북자 인물 설정</h2>
                
                <div class="form-group">
                    <label>직업 (100개 엘리트 리스트) 🔥</label>
                    <select id="job">
                        <option value="">선택하세요</option>
                        
                        <optgroup label="🟥 보위부·안전기관">
                            <option value="보위부_중장">보위부 중장</option>
                            <option value="보위부_해외공작국_과장">보위부 해외공작국 과장</option>
                            <option value="보위부_감청실_책임자">보위부 감청실 책임자</option>
                            <option value="보위부_대좌_조사관">보위부 대좌 조사관</option>
                            <option value="보위부_국경단속_총책임자">보위부 국경단속 총책임자</option>
                            <option value="보위부_정치범수용소_관리_간부">보위부 정치범수용소 관리 간부</option>
                            <option value="보위부_경제담당_지도원">보위부 경제담당 지도원</option>
                            <option value="보위부_내부_검열부장">보위부 내부 검열부장</option>
                            <option value="보위부_체포심문_전담_장교">보위부 체포·심문 전담 장교</option>
                            <option value="보위성_해외요원_관리_책임자">보위성 해외 요원 관리 책임자</option>
                        </optgroup>

                        <optgroup label="🟦 정찰총국·스파이·공작">
                            <option value="정찰총국_해외공작원">정찰총국 해외공작원</option>
                            <option value="정찰총국_사이버전부_책임자">정찰총국 사이버전부 책임자</option>
                            <option value="정찰총국_무기밀매_담당_간부">정찰총국 무기밀매 담당 간부</option>
                            <option value="정찰총국_공작원_양성교관">정찰총국 공작원 양성교관</option>
                            <option value="정찰총국_여권신분세탁_담당자">정찰총국 여권·신분세탁 담당자</option>
                            <option value="정찰총국_대외공작금_결재_담당">정찰총국 대외공작금 결재 담당</option>
                            <option value="정찰총국_8국_요원">정찰총국 8국 요원</option>
                            <option value="정찰총국_아시아지역_공작_지부장">정찰총국 아시아지역 공작 지부장</option>
                            <option value="정찰총국_대만홍콩_라인_담당자">정찰총국 대만/홍콩 라인 담당자</option>
                            <option value="정찰총국_외화_밀반입_총책">정찰총국 외화 밀반입 총책</option>
                        </optgroup>

                        <optgroup label="🟩 김정은 직속·궁정·근위 관련">
                            <option value="김정은_경호원">김정은 경호원</option>
                            <option value="근위사단_대대장">근위사단 대대장</option>
                            <option value="근위사단_저격중대_중대장">근위사단 저격중대 중대장</option>
                            <option value="김정은_이동경호_사전정찰조_팀장">김정은 이동경호 사전정찰조 팀장</option>
                            <option value="김정은_전용열차_보안_책임자">김정은 전용열차 보안 책임자</option>
                            <option value="생활총국_고위_간부">생활총국 고위 간부</option>
                            <option value="김정은_집사_역할_담당자">김정은 집사 역할 담당자</option>
                            <option value="평양_1호_경호국_참모">평양 1호 경호국 참모</option>
                            <option value="김정은_전속_요리사">김정은 전속 요리사</option>
                            <option value="김정은_의전_담당_비서국_간부">김정은 의전 담당 비서국 간부</option>
                        </optgroup>

                        <optgroup label="🟨 군부 핵심 지휘부">
                            <option value="조선인민군_참모총장">조선인민군 참모총장</option>
                            <option value="군단_부참모장">군단 부참모장</option>
                            <option value="포병_지휘국_작전참모">포병 지휘국 작전참모</option>
                            <option value="총정치국_고급간부">총정치국 고급간부</option>
                            <option value="전략군_미사일_지휘소_책임자">전략군 미사일 지휘소 책임자</option>
                            <option value="특수작전군_대대장">특수작전군 대대장</option>
                            <option value="항공_및_방공군_전투기_조종사">항공 및 방공군 전투기 조종사</option>
                            <option value="해군_잠수함_함장">해군 잠수함 함장</option>
                            <option value="공군_지휘센터_레이더_책임관">공군 지휘센터 레이더 책임관</option>
                            <option value="군수공장_총기사">군수공장 총기사</option>
                            <option value="륜_기사장">륜 기사장</option>
                        </optgroup>

                        <optgroup label="🟫 핵·미사일·과학기술 기밀 분야">
                            <option value="국방과학원_핵실험실_연구사">국방과학원 핵실험실 연구사</option>
                            <option value="탄도미사일_설계_책임자">탄도미사일 설계 책임자</option>
                            <option value="위성발사소_통제실_기술원">위성발사소 통제실 기술원</option>
                            <option value="화학무기_연구소_소장">화학무기 연구소 소장</option>
                            <option value="핵연료_운송_보안_책임자">핵연료 운송 보안 책임자</option>
                            <option value="군수공장_기밀_설비_기사">군수공장 기밀 설비 기사</option>
                            <option value="로켓_추진체_개발_간부">로켓 추진체 개발 간부</option>
                            <option value="생물무기_연구팀_의사">생물무기 연구팀 의사</option>
                            <option value="핵_시설_지도부_문건관리원">핵 시설 지도부 문건관리원</option>
                            <option value="미사일_발사대_통제_요원">미사일 발사대 통제 요원</option>
                        </optgroup>

                        <optgroup label="🟧 외화벌이·무역·대외사업">
                            <option value="39호실_외화벌이_총책">39호실 외화벌이 총책</option>
                            <option value="나진선봉_무역회사_사장">나진·선봉 무역회사 사장</option>
                            <option value="중국_파견_무역대표부_부대표">중국 파견 무역대표부 부대표</option>
                            <option value="해외_식당_총책임자">해외 식당 총책임자</option>
                            <option value="평양_무역성_중동사업_담당자">평양 무역성 중동사업 담당자</option>
                            <option value="광물_수출_라인_책임자">광물 수출 라인 책임자</option>
                            <option value="국영_무역회사_외화청구_담당관">국영 무역회사 외화청구 담당관</option>
                            <option value="담배주류_해외밀수_총괄">담배·주류 해외밀수 총괄</option>
                            <option value="해외_파견_IT_인력_관리자">해외 파견 IT 인력 관리자</option>
                            <option value="광산_해외영업_책임자">광산 해외영업 책임자</option>
                        </optgroup>

                        <optgroup label="🟪 중앙당·선전선동·정치조직">
                            <option value="당_조직지도부_검열원">당 조직지도부 검열원</option>
                            <option value="당_선전선동부_고위_간부">당 선전선동부 고위 간부</option>
                            <option value="당_국제부_연락책">당 국제부 연락책</option>
                            <option value="당_중앙위원회_비서">당 중앙위원회 비서</option>
                            <option value="당_출판보도국_검열관">당 출판보도국 검열관</option>
                            <option value="청년동맹_고위_간부">청년동맹 고위 간부</option>
                            <option value="여맹_지도원">여맹 지도원</option>
                            <option value="중앙당_서기실_문서_담당">중앙당 서기실 문서 담당</option>
                            <option value="평양_선전물_영상_감독">평양 선전물 영상 감독</option>
                            <option value="혁명역사연구소_연구사">혁명역사연구소 연구사</option>
                        </optgroup>

                        <optgroup label="🟫 평양 상류층·특권 계급">
                            <option value="봉화진료소_의사">봉화진료소 의사</option>
                            <option value="고위층_전용_요양소_의무장">고위층 전용 요양소 의무장</option>
                            <option value="류경호텔_관리자">류경호텔 관리자</option>
                            <option value="고위층_전용마트_수입품_담당">고위층 전용마트 수입품 담당</option>
                            <option value="평양_엘리트_예술단_감독">평양 엘리트 예술단 감독</option>
                            <option value="해외_공연단_단장">해외 공연단 단장</option>
                            <option value="상류층_자녀_학교_교원">상류층 자녀 학교 교원</option>
                            <option value="고위_당_간부_운전기사">고위 당 간부 운전기사</option>
                            <option value="평양_고급_식당_총지배인">평양 고급 식당 총지배인</option>
                            <option value="고위층_빌라_관리_책임자">고위층 빌라 관리 책임자</option>
                        </optgroup>

                        <optgroup label="🟩 교통·통신·기술 기밀직">
                            <option value="전용열차_기관사">전용열차 기관사</option>
                            <option value="국제전화_감청_담당자">국제전화 감청 담당자</option>
                            <option value="국가통신부_암호관리_책임자">국가통신부 암호관리 책임자</option>
                            <option value="위성통신_통제소_요원">위성통신 통제소 요원</option>
                            <option value="외화발송_국제우편_검열_담당">외화발송 국제우편 검열 담당</option>
                            <option value="공항_VIP경호팀_요원">공항 VIP경호팀 요원</option>
                            <option value="군당_통신망_유지_기술자">군·당 통신망 유지 기술자</option>
                            <option value="대외방송국_기술감독">대외방송국 기술감독</option>
                            <option value="정보보안_교육_담당관">정보보안_교육_담당관</option>
                            <option value="평양_IT개발센터_책임_프로그래머">평양 IT개발센터 책임 프로그래머</option>
                        </optgroup>

                        <optgroup label="🟦 기타 특수·위험 직군">
                            <option value="국경경비대_대대장">국경경비대 대대장</option>
                            <option value="마약_밀수_감시_책임_보위원">마약 밀수 감시 책임 보위원</option>
                            <option value="밀수조직_보위부_침투_담당">밀수조직 보위부 침투 담당</option>
                            <option value="특수_임무_담당_스나이퍼">특수 임무 담당 스나이퍼</option>
                            <option value="고위층_주택구역_경비대장">고위층 주택구역 경비대장</option>
                            <option value="보위부_특수체포조_지휘관">보위부 특수체포조 지휘관</option>
                            <option value="지하시설_비밀_건설_책임기술자">지하시설 비밀 건설 책임기술자</option>
                            <option value="외교관_신분_대남공작원">외교관 신분 대남공작원</option>
                            <option value="해외_위장회사_운영_간부">해외 위장회사 운영 간부</option>
                            <option value="최고지도부_전용_식품_검사관">최고지도부 전용 식품 검사관</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group">
                    <label>현재 나이</label>
                    <input type="number" id="currentAge" placeholder="예: 45" min="20" max="90">
                </div>

                <div class="form-group">
                    <label>탈북 당시 나이</label>
                    <input type="number" id="defectionAge" placeholder="예: 38" min="15" max="80">
                </div>

                <div class="form-group">
                    <label>출신 지역</label>
                    <select id="region">
                        <option value="">선택하세요</option>
                        <option value="평양">평양</option>
                        <option value="함경북도">함경북도</option>
                        <option value="함경남도">함경남도</option>
                        <option value="양강도">양강도</option>
                        <option value="자강도">자강도</option>
                        <option value="평안북도">평안북도</option>
                        <option value="평안남도">평안남도</option>
                        <option value="황해북도">황해북도</option>
                        <option value="황해남도">황해남도</option>
                        <option value="강원도">강원도</option>
                        <option value="개성">개성</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>탈북 시기</label>
                    <select id="defectionPeriod">
                        <option value="">선택하세요</option>
                        <option value="1990s">1990년대 (고난의 행군)</option>
                        <option value="2000s">2000년대 (김정일 시대)</option>
                        <option value="2010s">2010년대 (김정은 초기)</option>
                        <option value="2020s">2020년대 (최근)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>가족 구성 (중복 선택 가능)</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                        <label><input type="checkbox" name="family" value="배우자"> 배우자</label>
                        <label><input type="checkbox" name="family" value="자녀"> 자녀</label>
                        <label><input type="checkbox" name="family" value="부모"> 부모</label>
                        <label><input type="checkbox" name="family" value="형제자매"> 형제자매</label>
                        <label><input type="checkbox" name="family" value="조부모"> 조부모</label>
                        <label><input type="checkbox" name="family" value="단독"> 단독 탈북</label>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>📋 시놉시스 입력 (선택사항)</h2>
                
                <div class="info-box">
                    <strong>💡 작성 팁</strong>
                    <p>GPTs에서 생성한 시놉시스를 붙여넣으면 Claude AI가 자동으로 스크립트를 생성합니다.</p>
                    <p>시놉시스 없이 바로 작성하셔도 됩니다.</p>
                </div>

                <div class="form-group">
                    <textarea id="synopsis" placeholder="// 시놉시스

인트로:
[인트로 내용]

챕터 1: [제목]
[내용]

챕터 2: [제목]
[내용]

...

(시놉시스가 있으면 Claude AI가 자동으로 8챕터 × 1,600자 스크립트를 생성합니다)"></textarea>
                </div>

                <button class="btn btn-success" onclick="generateNorthKoreaScript()" style="width: 100%; margin-bottom: 20px;">
                    🤖 Claude AI로 스크립트 자동 생성
                </button>
            </div>

            <div class="card">
                <h2>📝 스크립트 작성</h2>
                <div class="form-group">
                    <label>스크립트 제목</label>
                    <input type="text" id="scriptTitle" placeholder="예: 보위부 출신 탈북자의 충격적인 증언">
                </div>
                
                <div class="form-group">
                    <label>스크립트 본문 (한국어 원본)</label>
                    <textarea id="scriptContent" placeholder="8챕터 × 1,600자 = 12,800자 분량으로 작성하세요...

챕터 1:
[내용 작성]

챕터 2:
[내용 작성]

...

(또는 위에서 '스크립트 자동 생성' 버튼을 누르면 여기에 자동으로 생성됩니다)"></textarea>
                </div>

                <div class="info-box">
                    <strong>📋 스크립트 규격 (절대 엄수!)</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>총 분량:</strong> 8챕터 × 1,600자 = 12,800자 (공백 제외)</li>
                        <li><strong>챕터당:</strong> 1,550 ~ 1,650자 (허용 범위)</li>
                        <li><strong>예상 영상 길이:</strong> 약 40분</li>
                        <li><strong>TTS 속도 기준:</strong> 320자/분</li>
                    </ul>
                </div>

                <button class="btn btn-primary" onclick="saveScript()" style="width: 100%; font-size: 20px; padding: 20px;">
                    💾 스크립트 저장하기
                </button>
            </div>
        </div>

        <!-- 번역 탭 -->
        <div id="translation" class="tab-content">
            <div class="card">
                <h2>🌍 다국어 자동 번역</h2>
                
                <div class="info-box">
                    <strong>💡 번역 안내</strong>
                    <p>저장된 스크립트를 선택하여 영어, 일본어, 중국어(번체)로 자동 번역합니다.</p>
                    <p>번역은 각 언어별 특성에 맞춰 최적화됩니다.</p>
                </div>

                <div class="form-group">
                    <label>번역할 스크립트 선택</label>
                    <select id="translationScriptSelect">
                        <option value="">먼저 스크립트를 저장해주세요</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="translateScript()" style="width: 100%; margin-bottom: 20px;">
                    🌐 3개 언어로 자동 번역 시작 (영어 / 일본어 / 중국어 번체)
                </button>

                <div id="translationResults" class="translation-results">
                    <!-- 번역 결과가 여기 표시됩니다 -->
                </div>
            </div>

            <div class="card" style="background: #f0f8ff; border: 2px solid #667eea;">
                <h2>📚 번역 가이드라인</h2>
                
                <h3 style="color: #1e3c72; margin-top: 20px;">🇺🇸 영어 (미국 영어)</h3>
                <ul style="margin-left: 20px; color: #555; line-height: 1.8;">
                    <li>타겟: 40-70세 미국 시청자</li>
                    <li>번역티 완전 제거, 자연스러운 미국식 표현</li>
                    <li>북한 = North Korea (NK 약어 사용 금지)</li>
                    <li>긴 문장 → 2-3개 짧은 문장으로 분리</li>
                </ul>

                <h3 style="color: #1e3c72; margin-top: 20px;">🇯🇵 일본어</h3>
                <ul style="margin-left: 20px; color: #555; line-height: 1.8;">
                    <li>경어법: 도입부 정중(です·ます), 중반부터 보통(だ·である)</li>
                    <li>TTS 최적화: 쉼표·마침표 적절 배치</li>
                    <li>긴 문장 → 2-3문장 분리</li>
                    <li>한자 사용 최소화, 가타카나 적절 활용</li>
                </ul>

                <h3 style="color: #1e3c72; margin-top: 20px;">🇹🇼 중국어 번체 (대만)</h3>
                <ul style="margin-left: 20px; color: #555; line-height: 1.8;">
                    <li>대륙 용어 절대 금지 (×干部 → ○幹部)</li>
                    <li>괄호 사용 금지, 문장 흐름 자연스럽게</li>
                    <li>영상적 표현력 강화</li>
                    <li>대만 관습적 표현 적극 활용</li>
                </ul>
            </div>
        </div>

        <!-- 저장된 스크립트 탭 -->
        <div id="saved" class="tab-content">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">💾 저장된 스크립트</h2>
                    <button class="btn btn-danger btn-small" onclick="clearAllScripts()">🗑️ 전체 삭제</button>
                </div>
                
                <div id="scriptList" class="script-list">
                    <!-- 저장된 스크립트가 여기 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // 오늘 날짜 자동 설정
        document.getElementById('keywordDate').valueAsDate = new Date();

        // Claude API 키
        const CLAUDE_API_KEY = 'sk-ant-api03-iE-o78cdEZ7O_CyHSVIL3VEAHdg-6dQ2ZGPLJqPdR4c8DcNQePD4bXVVnwbqJr3FCBDcxJ4Eha_F3QZUi46nfw-D2b3RAAA';

        // 북한 스크립트 자동 생성 (4단계)
        async function generateNorthKoreaScript() {
            const synopsis = document.getElementById('synopsis').value;
            const selectedKeywords = Array.from(document.querySelectorAll('input[name="keyword"]:checked'))
                .map(cb => cb.value);
            const job = document.getElementById('job').value;
            const currentAge = document.getElementById('currentAge').value;
            const defectionAge = document.getElementById('defectionAge').value;
            const region = document.getElementById('region').value;
            const defectionPeriod = document.getElementById('defectionPeriod').value;

            if (!synopsis || selectedKeywords.length === 0) {
                alert('❌ 시놉시스와 키워드를 먼저 선택해주세요!\n\n필수:\n- 키워드 최소 1개 선택\n- 시놉시스 입력');
                return;
            }

            if (!job || !currentAge || !defectionAge) {
                alert('❌ 탈북자 인물 설정을 완료해주세요!\n\n필수:\n- 직업\n- 현재 나이\n- 탈북 당시 나이');
                return;
            }

            const scriptContent = document.getElementById('scriptContent');
            
            try {
                // 기본 정보
                const baseInfo = `[탈북자 정보]
- 직업: ${job}
- 현재 나이: ${currentAge}세
- 탈북 당시 나이: ${defectionAge}세
- 출신 지역: ${region}
- 탈북 시기: ${defectionPeriod}

[선택된 키워드]
${selectedKeywords.join(', ')}

[시놉시스]
${synopsis}`;

                let chapter1_3 = '';
                let chapter4_6 = '';
                let chapter7_8 = '';
                let intro = '';

                // 1단계: 챕터 1-3 생성
                scriptContent.value = '📝 1단계/4단계: 챕터 1-3 생성 중...\n\n약 30초 소요\n잠시만 기다려주세요...';
                
                const prompt1 = `${baseInfo}

위 시놉시스를 바탕으로 북한 탈북자 사연 스크립트의 **챕터 1, 2, 3**만 작성해주세요.

<필수 규격>
- 각 챕터: 1,550~1,650자 (공백 제외)
- 총 3개 챕터 = 약 4,800자

<작성 조건>
- 1인칭 내레이션
- 탈북자의 생생한 증언 형식
- 북한 내부 실상 구체적 묘사
- 선택된 키워드 자연스럽게 삽입
- 챕터별로 명확히 구분

"챕터 1:", "챕터 2:", "챕터 3:" 형식으로 구분하여 작성해주세요.`;

                const response1 = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': CLAUDE_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 6000,
                        messages: [{ role: 'user', content: prompt1 }]
                    })
                });

                if (!response1.ok) throw new Error(`API 오류 (1단계): ${response1.status}`);
                const data1 = await response1.json();
                chapter1_3 = data1.content[0].text;

                // 2단계: 챕터 4-6 생성
                scriptContent.value = `✅ 1단계 완료! 챕터 1-3 생성됨\n\n📝 2단계/4단계: 챕터 4-6 생성 중...\n\n약 30초 소요\n잠시만 기다려주세요...`;

                const prompt2 = `${baseInfo}

[앞서 작성된 챕터 1-3]
${chapter1_3}

위 내용에 이어서 북한 탈북자 사연 스크립트의 **챕터 4, 5, 6**만 작성해주세요.

<필수 규격>
- 각 챕터: 1,550~1,650자 (공백 제외)
- 총 3개 챕터 = 약 4,800자

<작성 조건>
- 1인칭 내레이션
- 챕터 1-3의 흐름을 자연스럽게 이어가기
- 긴장감 고조
- 선택된 키워드 자연스럽게 삽입

"챕터 4:", "챕터 5:", "챕터 6:" 형식으로 구분하여 작성해주세요.`;

                const response2 = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': CLAUDE_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 6000,
                        messages: [{ role: 'user', content: prompt2 }]
                    })
                });

                if (!response2.ok) throw new Error(`API 오류 (2단계): ${response2.status}`);
                const data2 = await response2.json();
                chapter4_6 = data2.content[0].text;

                // 3단계: 챕터 7-8 생성
                scriptContent.value = `✅ 1단계 완료! 챕터 1-3 생성됨\n✅ 2단계 완료! 챕터 4-6 생성됨\n\n📝 3단계/4단계: 챕터 7-8 생성 중...\n\n약 30초 소요\n잠시만 기다려주세요...`;

                const prompt3 = `${baseInfo}

[앞서 작성된 챕터 1-6]
${chapter1_3}

${chapter4_6}

위 내용에 이어서 북한 탈북자 사연 스크립트의 **챕터 7, 8 (마지막)**을 작성해주세요.

<필수 규격>
- 각 챕터: 1,550~1,650자 (공백 제외)
- 총 2개 챕터 = 약 3,200자

<작성 조건>
- 1인칭 내레이션
- 클라이맥스 및 해결
- 희망적 메시지로 마무리
- 감동적이고 여운 남기기

"챕터 7:", "챕터 8:" 형식으로 구분하여 작성해주세요.`;

                const response3 = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': CLAUDE_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 4000,
                        messages: [{ role: 'user', content: prompt3 }]
                    })
                });

                if (!response3.ok) throw new Error(`API 오류 (3단계): ${response3.status}`);
                const data3 = await response3.json();
                chapter7_8 = data3.content[0].text;

                // 4단계: 인트로 최종 작성
                scriptContent.value = `✅ 1단계 완료! 챕터 1-3 생성됨\n✅ 2단계 완료! 챕터 4-6 생성됨\n✅ 3단계 완료! 챕터 7-8 생성됨\n\n📝 4단계/4단계: 인트로 최종 작성 중...\n\n전체 내용을 파악하여 강력한 후킹 인트로를 만듭니다.\n약 20초 소요\n거의 완료되었습니다!`;

                const prompt4 = `${baseInfo}

[완성된 전체 챕터 1-8]
${chapter1_3}

${chapter4_6}

${chapter7_8}

위 전체 스크립트를 읽고, 시청자를 강력하게 끌어당길 **인트로**를 작성해주세요.

<필수 조건>
- 분량: 500-800자
- 조회수 폭발 공식 적용: 썸네일 기대감 즉시 충족
- 1분 안에 시청자를 붙잡기
- 채널 소개/인사 없이 바로 핵심 사건으로
- 가장 충격적인 부분을 먼저 제시
- "왜?"라는 질문을 던지게 만들기

"인트로:" 형식으로 시작하여 작성해주세요.`;

                const response4 = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': CLAUDE_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1500,
                        messages: [{ role: 'user', content: prompt4 }]
                    })
                });

                if (!response4.ok) throw new Error(`API 오류 (4단계): ${response4.status}`);
                const data4 = await response4.json();
                intro = data4.content[0].text;

                // 최종 조합
                const finalScript = `${intro}

${chapter1_3}

${chapter4_6}

${chapter7_8}`;

                scriptContent.value = finalScript;
                
                const charCount = finalScript.replace(/\s/g, '').length;
                alert(`🎉 북한 탈북자 스크립트 생성 완료!

✅ 4단계 모두 완료!
1단계: 챕터 1-3 ✓
2단계: 챕터 4-6 ✓
3단계: 챕터 7-8 ✓
4단계: 인트로 ✓

총 ${charCount}자 생성
목표: 12,800자

이제 제목을 입력하고 저장하기 버튼을 눌러주세요!`);

            } catch (error) {
                console.error('스크립트 생성 오류:', error);
                scriptContent.value = '❌ 스크립트 생성 중 오류가 발생했습니다.\n\n오류 내용: ' + error.message + '\n\nAPI 키를 확인하거나 잠시 후 다시 시도해주세요.';
                alert('❌ 생성 실패\n\n' + error.message);
            }
        }

        // 키워드 체크박스 카운트
        document.querySelectorAll('input[name="keyword"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const count = document.querySelectorAll('input[name="keyword"]:checked').length;
                document.getElementById('selectedKeywordCount').textContent = count;
                
                if (this.checked) {
                    this.parentElement.classList.add('checked');
                } else {
                    this.parentElement.classList.remove('checked');
                }
            });
        });

        // 커스텀 키워드 추가
        function addCustomKeyword() {
            const container = document.getElementById('customKeywords');
            const newInput = document.createElement('div');
            newInput.className = 'form-group';
            newInput.innerHTML = '<input type="text" placeholder="추가 키워드 입력">';
            container.appendChild(newInput);
        }

        // 키워드 새로고침
        function refreshKeywords() {
            alert('🔄 최신 북한 핫 키워드를 수집합니다!\n(실제로는 Claude web_search로 네이버/유튜브/구글 뉴스 검색)');
        }

        // 탭 전환
        function showTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'saved') {
                loadSavedScripts();
            } else if (tabName === 'translation') {
                updateTranslationScriptList();
            }
        }

        // 스크립트 저장
        function saveScript() {
            const title = document.getElementById('scriptTitle').value;
            const content = document.getElementById('scriptContent').value;
            
            // 키워드 수집
            const selectedKeywords = Array.from(document.querySelectorAll('input[name="keyword"]:checked'))
                .map(cb => cb.value);
            const customKeywords = Array.from(document.querySelectorAll('#customKeywords input'))
                .map(input => input.value)
                .filter(value => value.trim() !== '');
            const allKeywords = [...selectedKeywords, ...customKeywords];
            
            // 탈북자 정보
            const job = document.getElementById('job').value;
            const currentAge = document.getElementById('currentAge').value;
            const defectionAge = document.getElementById('defectionAge').value;
            const region = document.getElementById('region').value;
            const defectionPeriod = document.getElementById('defectionPeriod').value;
            const family = Array.from(document.querySelectorAll('input[name="family"]:checked'))
                .map(cb => cb.value);

            if (!title || !content) {
                alert('제목과 본문을 입력해주세요!');
                return;
            }

            const scriptData = {
                id: Date.now(),
                date: new Date().toISOString(),
                title: title,
                content: content,
                keywords: allKeywords,
                defector: {
                    job: job,
                    currentAge: currentAge,
                    defectionAge: defectionAge,
                    region: region,
                    defectionPeriod: defectionPeriod,
                    family: family
                }
            };

            let scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            scripts.unshift(scriptData);
            localStorage.setItem('savedScripts', JSON.stringify(scripts));
            
            updateSavedCount();
            alert('✅ 스크립트가 저장되었습니다!\n\n다음 단계:\n1. 저장된 스크립트 탭에서 확인\n2. 다국어 번역 탭에서 번역하기');
            
            // 저장 탭으로 이동
            document.querySelectorAll('.tab-button')[2].click();
        }

        // 저장된 스크립트 개수 업데이트
        function updateSavedCount() {
            const scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            document.getElementById('savedCount').textContent = scripts.length;
        }

        // 번역용 스크립트 목록 업데이트
        function updateTranslationScriptList() {
            const scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            const select = document.getElementById('translationScriptSelect');
            
            if (scripts.length === 0) {
                select.innerHTML = '<option value="">먼저 스크립트를 저장해주세요</option>';
                return;
            }
            
            select.innerHTML = '<option value="">선택하세요</option>' + 
                scripts.map(script => 
                    `<option value="${script.id}">${script.title} (${new Date(script.date).toLocaleDateString('ko-KR')})</option>`
                ).join('');
        }

        // 스크립트 번역
        function translateScript() {
            const selectId = document.getElementById('translationScriptSelect').value;
            
            if (!selectId) {
                alert('번역할 스크립트를 선택해주세요!');
                return;
            }

            const scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            const script = scripts.find(s => s.id == selectId);
            
            if (!script) {
                alert('스크립트를 찾을 수 없습니다!');
                return;
            }

            const resultsContainer = document.getElementById('translationResults');
            resultsContainer.innerHTML = `
                <div class="info-box">
                    <strong>⏳ 번역 진행 중...</strong>
                    <p>3개 언어로 번역 중입니다. (시뮬레이션 - A안)</p>
                    <p>실제 B안에서는 Claude API를 통해 고품질 번역이 자동으로 진행됩니다.</p>
                </div>
            `;

            // 시뮬레이션: 2초 후 결과 표시
            setTimeout(() => {
                resultsContainer.innerHTML = `
                    <div class="success-box">
                        <strong>✅ 번역 완료!</strong>
                        <p>3개 언어 번역이 완료되었습니다. 각 언어별로 다운로드할 수 있습니다.</p>
                    </div>

                    <div class="translation-card">
                        <div class="translation-header">
                            <div class="translation-lang">🇺🇸 영어 (American English)</div>
                            <button class="btn btn-secondary btn-small" onclick="downloadTranslation('english', ${script.id})">📥 DOCX 다운로드</button>
                        </div>
                        <div class="translation-text">[영어 번역본]

${script.title} - English Version

Chapter 1:
This is a simulated English translation of your North Korean defector script. In the actual B-version, Claude API will provide high-quality, natural American English translations optimized for your 40-70 age target audience.

Key features of the English translation:
• Natural, conversational tone
• No translation artifacts
• Short, impactful sentences
• Cultural adaptation for US viewers

Chapter 2:
[Additional content would appear here...]

Total: ${script.content.length} characters translated
Language: American English (en-US)
Target Audience: 40-70 years old</div>
                    </div>

                    <div class="translation-card">
                        <div class="translation-header">
                            <div class="translation-lang">🇯🇵 일본어 (日本語)</div>
                            <button class="btn btn-secondary btn-small" onclick="downloadTranslation('japanese', ${script.id})">📥 DOCX 다운로드</button>
                        </div>
                        <div class="translation-text">[일본어 번역본]

${script.title} - 日本語版

第1章：
これは北朝鮮脱北者のスクリプトの模擬日本語翻訳です。実際のB版では、Claude APIが高品質で自然な日本語翻訳を提供します。

日本語翻訳の主な特徴：
• 敬語から常体への自然な移行
• TTS最適化された文章構造
• 適切な漢字とひらがなのバランス
• 日本の視聴者に配慮した表現

第2章：
【追加コンテンツがここに表示されます...】

文字数：${script.content.length}文字を翻訳
言語：日本語 (ja-JP)
対象視聴者：40-70歳</div>
                    </div>

                    <div class="translation-card">
                        <div class="translation-header">
                            <div class="translation-lang">🇹🇼 중국어 번체 (繁體中文)</div>
                            <button class="btn btn-secondary btn-small" onclick="downloadTranslation('chinese', ${script.id})">📥 DOCX 다운로드</button>
                        </div>
                        <div class="translation-text">[중국어 번체 번역본]

${script.title} - 繁體中文版

第一章：
這是北韓脫北者腳本的模擬繁體中文翻譯。在實際的B版本中，Claude API將提供高品質、自然的繁體中文翻譯。

繁體中文翻譯的主要特點：
• 避免使用大陸用語
• 符合臺灣慣用表達
• 流暢的敘事結構
• 針對臺灣觀眾的文化調適

第二章：
【更多內容將在此顯示...】

字數：${script.content.length}字翻譯完成
語言：繁體中文 (zh-TW)
目標觀眾：40-70歲</div>
                    </div>
                `;

                alert('✅ 번역 완료! (시뮬레이션)\n\n실제 B안에서는:\n- Claude API로 고품질 번역\n- 각 언어별 최적화\n- DOCX 파일 자동 생성\n- 원클릭 다운로드');
            }, 2000);
        }

        // 번역본 다운로드
        function downloadTranslation(lang, scriptId) {
            const langNames = {
                'english': '영어',
                'japanese': '일본어',
                'chinese': '중국어 번체'
            };
            alert(`📥 ${langNames[lang]} 번역본 다운로드\n\n실제 B안에서는 DOCX 파일로 자동 다운로드됩니다!`);
        }

        // 저장된 스크립트 로드
        function loadSavedScripts() {
            const scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            const listContainer = document.getElementById('scriptList');

            if (scripts.length === 0) {
                listContainer.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <h3>저장된 스크립트가 없습니다</h3>
                        <p>스크립트를 생성하면 여기에 자동 저장됩니다.</p>
                    </div>
                `;
                return;
            }

            listContainer.innerHTML = scripts.map(script => `
                <div class="script-item">
                    <div class="script-header">
                        <div class="script-title">${script.title}</div>
                        <div class="script-date">${new Date(script.date).toLocaleDateString('ko-KR')}</div>
                    </div>
                    <div class="script-summary">${script.content.substring(0, 200)}...</div>
                    <div class="script-meta">
                        ${script.keywords ? script.keywords.slice(0, 5).map(k => `<span class="meta-tag">${k}</span>`).join('') : ''}
                        ${script.keywords && script.keywords.length > 5 ? `<span class="meta-tag">+${script.keywords.length - 5}개 더</span>` : ''}
                    </div>
                    <div class="script-actions">
                        <button class="btn btn-primary btn-small" onclick="viewScript(${script.id})">👁️ 전체 보기</button>
                        <button class="btn btn-success btn-small" onclick="translateScriptById(${script.id})">🌐 번역하기</button>
                        <button class="btn btn-danger btn-small" onclick="deleteScript(${script.id})">🗑️ 삭제</button>
                    </div>
                </div>
            `).join('');
        }

        // 스크립트 상세 보기
        function viewScript(id) {
            const scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            const script = scripts.find(s => s.id === id);
            
            if (script) {
                alert(`📋 ${script.title}\n\n${script.content}`);
            }
        }

        // 스크립트 번역 바로가기
        function translateScriptById(id) {
            document.getElementById('translationScriptSelect').value = id;
            document.querySelectorAll('.tab-button')[1].click();
        }

        // 스크립트 삭제
        function deleteScript(id) {
            if (!confirm('정말 이 스크립트를 삭제하시겠습니까?')) return;
            
            let scripts = JSON.parse(localStorage.getItem('savedScripts') || '[]');
            scripts = scripts.filter(s => s.id !== id);
            localStorage.setItem('savedScripts', JSON.stringify(scripts));
            
            loadSavedScripts();
            updateSavedCount();
        }

        // 전체 스크립트 삭제
        function clearAllScripts() {
            if (!confirm('⚠️ 모든 저장된 스크립트를 삭제하시겠습니까?\n이 작업은 되돌릴 수 없습니다!')) return;
            
            localStorage.removeItem('savedScripts');
            loadSavedScripts();
            updateSavedCount();
            alert('✅ 모든 스크립트가 삭제되었습니다.');
        }

        // 페이지 로드 시
        updateSavedCount();
    </script>
</body>
</html>
